!function(){"use strict";new class{constructor(){this.container=document.querySelector(".timeline-container"),this.dataList=this.container.querySelector(".timeline-data--list"),this.inputDataForm=this.container.querySelector(".timeline-input-data-form"),this.inputCoordsForm=this.container.querySelector(".timeline-input-coords-form"),this.inputCoordsField=this.inputCoordsForm.querySelector(".timeline-input"),this.coordsElement=void 0,this.bindToDOM()}bindToDOM(){this.onDataFormSubmit=this.onDataFormSubmit.bind(this),this.onCoordsFormSubmit=this.onCoordsFormSubmit.bind(this),this.onCoordsFormReset=this.onCoordsFormReset.bind(this),this.onCoordsFieldInput=this.onCoordsFieldInput.bind(this),this.inputDataForm.addEventListener("submit",this.onDataFormSubmit),this.inputCoordsForm.addEventListener("submit",this.onCoordsFormSubmit),this.inputCoordsForm.addEventListener("reset",this.onCoordsFormReset),this.inputCoordsField.addEventListener("input",this.onCoordsFieldInput)}onDataFormSubmit(t){t.preventDefault();const i={text:this.inputDataForm.text.value};this.addItem(i),this.inputDataForm.text.value=""}addItem(t){const i=Date.now(),e=document.createElement("li");if(e.classList.add("timeline-data--item"),e.innerHTML='\n  <div class="timeline-data--item-top">\n      <div class="timeline-data--item-content">\n      </div>\n      <a class="timeline-data--item-date"></a>\n  </div>\n  <a class="timeline-data--item-location"></a>\n',t.text){const i=document.createElement("a");i.classList.add("timeline-data--item-text"),i.textContent=t.text,e.querySelector(".timeline-data--item-content").appendChild(i)}e.querySelector(".timeline-data--item-date").textContent=`${new Date(i).toLocaleDateString()} ${new Date(i).toLocaleTimeString()}`,this.coordsElement=e.querySelector(".timeline-data--item-location"),this.dataList.insertAdjacentElement("afterbegin",e),this.addLocation()}addLocation(){navigator.geolocation&&navigator.geolocation.getCurrentPosition((t=>{const{latitude:i,longitude:e}=t.coords;this.coordsElement&&(this.coordsElement.textContent=`[${i}, ${e}]`,this.coordsElement=void 0)}),(t=>{console.log(t),this.inputCoordsForm.classList.add("timeline-form--display-active"),this.inputCoordsForm.coords.value="",this.inputCoordsField.focus()}),{enableHighAccuracy:!0})}onCoordsFormSubmit(t){t.preventDefault();const i=this.inputCoordsForm.coords.value;if(!/^\[?((\-?|\+?)?\d+(\.\d+)?),\s*((\-?|\+?)?\d+(\.\d+)?)\]?$/gm.test(i))return this.inputCoordsField.classList.add("invalid"),void this.inputCoordsField.focus();this.coordsElement&&(this.coordsElement.textContent=this.inputCoordsForm.coords.value,this.coordsElement=void 0),this.inputCoordsField.classList.remove("invalid"),this.inputCoordsForm.classList.remove("timeline-form--display-active"),this.inputDataForm.querySelector(".timeline-input").focus()}onCoordsFormReset(){this.inputCoordsField.classList.remove("invalid"),this.inputCoordsForm.classList.remove("timeline-form--display-active"),this.inputDataForm.querySelector(".timeline-input").focus()}onCoordsFieldInput(){this.inputCoordsField.classList.remove("invalid")}}}();